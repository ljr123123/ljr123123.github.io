import{D as p,G as Ue,u as Ne,H as ne,I as We,J as _e,L as t,M as Xe,N as Ye,O as S,P as Pe,Q as _,R as ze,S as qe,U as Ie,V as Je,W as Ze,X as G,Y as Ee,Z as Qe,$ as ee,a0 as Ge,a1 as et,a2 as tt,a3 as at,a4 as ot,a5 as Ce,a6 as te,a7 as nt,a8 as st,a9 as lt,aa as rt,ab as z,ac as it,ad as ut,ae as ct,o as f,c as w,f as y,F as ae,l as b,af as K,d as V,b as x,w as M,k as U,ag as R,ah as oe,a as dt,ai as pt,B as ft,aj as vt,t as W,n as yt,ak as mt,al as ht,am as $e,an as bt}from"./index.e8d0637a.js";function gt(a){return a==null}const se="update:modelValue",wt=a=>/([(\uAC00-\uD7AF)|(\u3130-\u318F)])+/gi.test(a),xt=["class","style"],St=/^on[A-Z]/,It=(a={})=>{const{excludeListeners:n=!1,excludeKeys:l}=a,o=p(()=>((l==null?void 0:l.value)||[]).concat(xt)),r=Ne();return r?p(()=>{var d;return Ue(Object.entries((d=r.proxy)==null?void 0:d.$attrs).filter(([u])=>!o.value.includes(u)&&!(n&&St.test(u))))}):p(()=>({}))},Et={prefix:Math.floor(Math.random()*1e4),current:0},Ct=Symbol("elIdInjection"),$t=a=>{const n=ne(Ct,Et),l=We("namespace",_e);return p(()=>t(a)||`${l.value}-id-${n.prefix}-${n.current++}`)},kt=()=>{const a=ne(Xe,void 0),n=ne(Ye,void 0);return{form:a,formItem:n}},Nt=(a,{formItemContext:n,disableIdGeneration:l,disableIdManagement:o})=>{l||(l=S(!1)),o||(o=S(!1));const r=S();let d;const u=p(()=>{var h;return!!(!a.label&&n&&n.inputIds&&((h=n.inputIds)==null?void 0:h.length)<=1)});return Pe(()=>{d=_([ze(a,"id"),l],([h,c])=>{const m=h!=null?h:c?void 0:$t().value;m!==r.value&&(n!=null&&n.removeInputId&&(r.value&&n.removeInputId(r.value),!(o!=null&&o.value)&&!c&&m&&n.addInputId(m)),r.value=m)},{immediate:!0})}),qe(()=>{d&&d(),n!=null&&n.removeInputId&&r.value&&n.removeInputId(r.value)}),{isLabeledByFormItem:u,inputId:r}};function Pt(a){const n=S();function l(){if(a.value==null)return;const{selectionStart:r,selectionEnd:d,value:u}=a.value;if(r==null||d==null)return;const h=u.slice(0,Math.max(0,r)),c=u.slice(Math.max(0,d));n.value={selectionStart:r,selectionEnd:d,value:u,beforeTxt:h,afterTxt:c}}function o(){if(a.value==null||n.value==null)return;const{value:r}=a.value,{beforeTxt:d,afterTxt:u,selectionStart:h}=n.value;if(d==null||u==null||h==null)return;let c=r.length;if(r.endsWith(u))c=r.length-u.length;else if(r.startsWith(d))c=d.length;else{const m=d[h-1],I=r.indexOf(m,h-1);I!==-1&&(c=I+1)}a.value.setSelectionRange(c,c)}return[l,o]}let g;const zt=`
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,Vt=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function Tt(a){const n=window.getComputedStyle(a),l=n.getPropertyValue("box-sizing"),o=Number.parseFloat(n.getPropertyValue("padding-bottom"))+Number.parseFloat(n.getPropertyValue("padding-top")),r=Number.parseFloat(n.getPropertyValue("border-bottom-width"))+Number.parseFloat(n.getPropertyValue("border-top-width"));return{contextStyle:Vt.map(u=>`${u}:${n.getPropertyValue(u)}`).join(";"),paddingSize:o,borderSize:r,boxSizing:l}}function ke(a,n=1,l){var o;g||(g=document.createElement("textarea"),document.body.appendChild(g));const{paddingSize:r,borderSize:d,boxSizing:u,contextStyle:h}=Tt(a);g.setAttribute("style",`${h};${zt}`),g.value=a.value||a.placeholder||"";let c=g.scrollHeight;const m={};u==="border-box"?c=c+d:u==="content-box"&&(c=c-r),g.value="";const I=g.scrollHeight-r;if(Ie(n)){let v=I*n;u==="border-box"&&(v=v+r+d),c=Math.max(v,c),m.minHeight=`${v}px`}if(Ie(l)){let v=I*l;u==="border-box"&&(v=v+r+d),c=Math.min(v,c)}return m.height=`${c}px`,(o=g.parentNode)==null||o.removeChild(g),g=void 0,m}const Ft=Je({id:{type:String,default:void 0},size:Ze,disabled:Boolean,modelValue:{type:G([String,Number,Object]),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:G([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String,default:""},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:Ee},prefixIcon:{type:Ee},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:G([Object,Array,String]),default:()=>Qe({})}}),At={[se]:a=>ee(a),input:a=>ee(a),change:a=>ee(a),focus:a=>a instanceof FocusEvent,blur:a=>a instanceof FocusEvent,clear:()=>!0,mouseleave:a=>a instanceof MouseEvent,mouseenter:a=>a instanceof MouseEvent,keydown:a=>a instanceof Event,compositionstart:a=>a instanceof CompositionEvent,compositionupdate:a=>a instanceof CompositionEvent,compositionend:a=>a instanceof CompositionEvent},Bt=["role"],Lt=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder"],Mt=["id","tabindex","disabled","readonly","autocomplete","aria-label","placeholder"],Rt={name:"ElInput",inheritAttrs:!1},Ot=Ge({...Rt,props:Ft,emits:At,setup(a,{expose:n,emit:l}){const o=a,r={suffix:"append",prefix:"prepend"},d=Ne(),u=et(),h=tt(),c=p(()=>{const e={};return o.containerRole==="combobox"&&(e["aria-haspopup"]=u["aria-haspopup"],e["aria-owns"]=u["aria-owns"],e["aria-expanded"]=u["aria-expanded"]),e}),m=It({excludeKeys:p(()=>Object.keys(c.value))}),{form:I,formItem:v}=kt(),{inputId:le}=Nt(o,{formItemContext:v}),Ve=at(),k=ot(),s=Ce("input"),re=Ce("textarea"),O=te(),N=te(),T=S(!1),X=S(!1),F=S(!1),D=S(!1),ie=S(),Y=te(o.inputStyle),A=p(()=>O.value||N.value),ue=p(()=>{var e;return(e=I==null?void 0:I.statusIcon)!=null?e:!1}),B=p(()=>(v==null?void 0:v.validateState)||""),ce=p(()=>B.value&&nt[B.value]),Te=p(()=>D.value?st:lt),Fe=p(()=>[u.style,o.inputStyle]),de=p(()=>[o.inputStyle,Y.value,{resize:o.resize}]),E=p(()=>gt(o.modelValue)?"":String(o.modelValue)),j=p(()=>o.clearable&&!k.value&&!o.readonly&&!!E.value&&(T.value||X.value)),q=p(()=>o.showPassword&&!k.value&&!o.readonly&&!!E.value&&(!!E.value||T.value)),P=p(()=>o.showWordLimit&&!!m.value.maxlength&&(o.type==="text"||o.type==="textarea")&&!k.value&&!o.readonly&&!o.showPassword),J=p(()=>Array.from(E.value).length),Ae=p(()=>!!P.value&&J.value>Number(m.value.maxlength)),Be=p(()=>!!h.suffix||!!o.suffixIcon||j.value||o.showPassword||P.value||!!B.value&&ue.value),[Le,Me]=Pt(O);rt(N,e=>{if(!P.value||o.resize!=="both")return;const i=e[0],{width:C}=i.contentRect;ie.value={right:`calc(100% - ${C+15+6}px)`}});const H=()=>{const{type:e,autosize:i}=o;if(!(!ht||e!=="textarea"))if(i){const C=$e(i)?i.minRows:void 0,$=$e(i)?i.maxRows:void 0;Y.value={...ke(N.value,C,$)}}else Y.value={minHeight:ke(N.value).minHeight}},L=()=>{const e=A.value;!e||e.value===E.value||(e.value=E.value)},pe=e=>{const{el:i}=d.vnode;if(!i)return;const $=Array.from(i.querySelectorAll(`.${s.e(e)}`)).find(Ke=>Ke.parentNode===i);if(!$)return;const Se=r[e];h[Se]?$.style.transform=`translateX(${e==="suffix"?"-":""}${i.querySelector(`.${s.be("group",Se)}`).offsetWidth}px)`:$.removeAttribute("style")},Z=()=>{pe("prefix"),pe("suffix")},Q=async e=>{Le();let{value:i}=e.target;if(o.formatter&&(i=o.parser?o.parser(i):i,i=o.formatter(i)),!F.value){if(i===E.value){L();return}l(se,i),l("input",i),await z(),L(),Me()}},fe=e=>{l("change",e.target.value)},ve=e=>{l("compositionstart",e),F.value=!0},ye=e=>{var i;l("compositionupdate",e);const C=(i=e.target)==null?void 0:i.value,$=C[C.length-1]||"";F.value=!wt($)},me=e=>{l("compositionend",e),F.value&&(F.value=!1,Q(e))},Re=()=>{D.value=!D.value,he()},he=async()=>{var e;await z(),(e=A.value)==null||e.focus()},Oe=()=>{var e;return(e=A.value)==null?void 0:e.blur()},be=e=>{T.value=!0,l("focus",e)},ge=e=>{var i;T.value=!1,l("blur",e),o.validateEvent&&((i=v==null?void 0:v.validate)==null||i.call(v,"blur").catch(C=>void 0))},De=e=>{X.value=!1,l("mouseleave",e)},je=e=>{X.value=!0,l("mouseenter",e)},we=e=>{l("keydown",e)},He=()=>{var e;(e=A.value)==null||e.select()},xe=()=>{l(se,""),l("change",""),l("clear"),l("input","")};return _(()=>o.modelValue,()=>{var e;z(()=>H()),o.validateEvent&&((e=v==null?void 0:v.validate)==null||e.call(v,"change").catch(i=>void 0))}),_(E,()=>L()),_(()=>o.type,async()=>{await z(),L(),H(),Z()}),Pe(async()=>{!o.formatter&&o.parser,L(),Z(),await z(),H()}),it(async()=>{await z(),Z()}),n({input:O,textarea:N,ref:A,textareaStyle:de,autosize:ze(o,"autosize"),focus:he,blur:Oe,select:He,clear:xe,resizeTextarea:H}),(e,i)=>ut((f(),w("div",oe(t(c),{class:[e.type==="textarea"?t(re).b():t(s).b(),t(s).m(t(Ve)),t(s).is("disabled",t(k)),t(s).is("exceed",t(Ae)),{[t(s).b("group")]:e.$slots.prepend||e.$slots.append,[t(s).bm("group","append")]:e.$slots.append,[t(s).bm("group","prepend")]:e.$slots.prepend,[t(s).m("prefix")]:e.$slots.prefix||e.prefixIcon,[t(s).m("suffix")]:e.$slots.suffix||e.suffixIcon||e.clearable||e.showPassword,[t(s).bm("suffix","password-clear")]:t(j)&&t(q)},e.$attrs.class],style:t(Fe),role:e.containerRole,onMouseenter:je,onMouseleave:De}),[y(" input "),e.type!=="textarea"?(f(),w(ae,{key:0},[y(" prepend slot "),e.$slots.prepend?(f(),w("div",{key:0,class:b(t(s).be("group","prepend"))},[K(e.$slots,"prepend")],2)):y("v-if",!0),V("div",{class:b([t(s).e("wrapper"),t(s).is("focus",T.value)])},[y(" prefix slot "),e.$slots.prefix||e.prefixIcon?(f(),w("span",{key:0,class:b(t(s).e("prefix"))},[V("span",{class:b(t(s).e("prefix-inner"))},[K(e.$slots,"prefix"),e.prefixIcon?(f(),x(t(R),{key:0,class:b(t(s).e("icon"))},{default:M(()=>[(f(),x(U(e.prefixIcon)))]),_:1},8,["class"])):y("v-if",!0)],2)],2)):y("v-if",!0),V("input",oe({id:t(le),ref_key:"input",ref:O,class:t(s).e("inner")},t(m),{type:e.showPassword?D.value?"text":"password":e.type,disabled:t(k),formatter:e.formatter,parser:e.parser,readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.label,placeholder:e.placeholder,style:e.inputStyle,onCompositionstart:ve,onCompositionupdate:ye,onCompositionend:me,onInput:Q,onFocus:be,onBlur:ge,onChange:fe,onKeydown:we}),null,16,Lt),y(" suffix slot "),t(Be)?(f(),w("span",{key:1,class:b(t(s).e("suffix"))},[V("span",{class:b(t(s).e("suffix-inner"))},[!t(j)||!t(q)||!t(P)?(f(),w(ae,{key:0},[K(e.$slots,"suffix"),e.suffixIcon?(f(),x(t(R),{key:0,class:b(t(s).e("icon"))},{default:M(()=>[(f(),x(U(e.suffixIcon)))]),_:1},8,["class"])):y("v-if",!0)],64)):y("v-if",!0),t(j)?(f(),x(t(R),{key:1,class:b([t(s).e("icon"),t(s).e("clear")]),onMousedown:ft(t(vt),["prevent"]),onClick:xe},{default:M(()=>[dt(t(pt))]),_:1},8,["class","onMousedown"])):y("v-if",!0),t(q)?(f(),x(t(R),{key:2,class:b([t(s).e("icon"),t(s).e("password")]),onClick:Re},{default:M(()=>[(f(),x(U(t(Te))))]),_:1},8,["class"])):y("v-if",!0),t(P)?(f(),w("span",{key:3,class:b(t(s).e("count"))},[V("span",{class:b(t(s).e("count-inner"))},W(t(J))+" / "+W(t(m).maxlength),3)],2)):y("v-if",!0),t(B)&&t(ce)&&t(ue)?(f(),x(t(R),{key:4,class:b([t(s).e("icon"),t(s).e("validateIcon"),t(s).is("loading",t(B)==="validating")])},{default:M(()=>[(f(),x(U(t(ce))))]),_:1},8,["class"])):y("v-if",!0)],2)],2)):y("v-if",!0)],2),y(" append slot "),e.$slots.append?(f(),w("div",{key:1,class:b(t(s).be("group","append"))},[K(e.$slots,"append")],2)):y("v-if",!0)],64)):(f(),w(ae,{key:1},[y(" textarea "),V("textarea",oe({id:t(le),ref_key:"textarea",ref:N,class:t(re).e("inner")},t(m),{tabindex:e.tabindex,disabled:t(k),readonly:e.readonly,autocomplete:e.autocomplete,style:t(de),"aria-label":e.label,placeholder:e.placeholder,onCompositionstart:ve,onCompositionupdate:ye,onCompositionend:me,onInput:Q,onFocus:be,onBlur:ge,onChange:fe,onKeydown:we}),null,16,Mt),t(P)?(f(),w("span",{key:0,style:yt(ie.value),class:b(t(s).e("count"))},W(t(J))+" / "+W(t(m).maxlength),7)):y("v-if",!0)],64))],16,Bt)),[[ct,e.type!=="hidden"]])}});var Dt=mt(Ot,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]);const Ht=bt(Dt);export{Ht as E,kt as u};
